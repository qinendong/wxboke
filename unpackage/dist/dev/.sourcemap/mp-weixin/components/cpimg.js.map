{"version":3,"sources":["webpack:///E:/Desktop/uni-app/project1/components/cpimg.vue","webpack:///E:/Desktop/uni-app/project1/components/cpimg.vue?95d6","webpack:///E:/Desktop/uni-app/project1/components/cpimg.vue?bf5a","webpack:///E:/Desktop/uni-app/project1/components/cpimg.vue?cecf","webpack:///E:/Desktop/uni-app/project1/components/cpimg.vue?2227","webpack:///E:/Desktop/uni-app/project1/components/cpimg.vue?234c","webpack:///E:/Desktop/uni-app/project1/components/cpimg.vue?56ef"],"names":["name","props","maxWidth","type","Number","default","minWidth","String","ql","src","size","data","cWidth","cHeight","onUnload","methods","_changImg","that","uni","chooseImage","count","sizeType","success","res","showLoading","title","mask","_cpImg","tempFilePaths","fail","e","_err","resPath","imgFile","sysInfo","getSystemInfoSync","getImageInfo","image","console","log","width","height","getFileInfo","filePath","_img","oW","oH","scaleWidth","scaleHeight","ctx","createCanvasContext","_result_wh","orientation","rotate","Math","PI","drawImage","draw","time","setTimeout","canvasToTempFilePath","destWidth","destHeight","canvasId","fileType","quality","tempFilePath","_result_path","img","wx","getFileSystemManager","readFileSync","_result","_reverseImgData","w","h","con","i","j","hideLoading","$emit","path"],"mappings":"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","file":"components/cpimg.js","sourcesContent":["//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nexport default {\r\n\tname: \"cpimg\",\r\n\tprops: {\r\n\t\tmaxWidth: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 750\r\n\t\t},\r\n\t\tminWidth: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0\r\n\t\t},\r\n\t\ttype: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'url'\r\n\t\t},\r\n\t\tql: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0.92\r\n\t\t},\r\n\t\tsrc: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\tsize: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 500\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcWidth: 750,\r\n\t\t\tcHeight: 750,\r\n\t\t}\r\n\t},\r\n\tonUnload: function () {\r\n\t},\r\n\tmethods: {\r\n\t\t// 选择照片\r\n\t\t_changImg() {\r\n\t\t\tlet that = this;\r\n\t\t\tif (that.src == '') {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1, //默认9\r\n\t\t\t\t\t// sizeType: ['original'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsizeType: ['compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: \"处理中\",\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat._cpImg(res.tempFilePaths[0])\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function (e) {\r\n\t\t\t\t\t\tthat._err(e)\r\n\t\t\t\t\t\t// console.log(JSON.stringify(res.tempFilePaths));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t_cpImg(that.src)\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 压缩图片\r\n\t\t_cpImg(resPath) {\r\n\t\t\tlet that = this\r\n\t\t\tlet imgFile = resPath\r\n\t\t\tlet sysInfo = uni.getSystemInfoSync()\r\n\t\t\t// 获取图片信息，\r\n\t\t\tuni.getImageInfo({\r\n\t\t\t\tsrc: imgFile,\r\n\t\t\t\tsuccess: function (image) {\r\n\t\t\t\t\tconsole.log(image.width);\r\n\t\t\t\t\tconsole.log(image.height);\r\n\r\n\t\t\t\t\t// 如果图片的大小大于设定值才压缩\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.getFileInfo({\r\n\t\t\t\t\t\tfilePath: imgFile,\r\n\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\t_img(image, res.size)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function (e) {\r\n\t\t\t\t\t\t\tthat._err(e)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t},\r\n\t\t\t\tfail: function (e) {\r\n\t\t\t\t\tthat._err(e)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// 处理图片\r\n\t\t\tfunction _img(image, size) {\r\n\t\t\t\tlet oW = image.width, oH = image.height, scaleWidth = 1, scaleHeight = 1;\r\n\t\t\t\tif (size / 1024 >= that.size || image.width >= that.maxWidth) {\r\n\t\t\t\t\t// 控制上传图片的宽高\r\n\t\t\t\t\tif (image.width >= image.height && image.width >= that.maxWidth) {\r\n\t\t\t\t\t\timage.height = that.maxWidth * image.height / image.width;\r\n\t\t\t\t\t\timage.width = that.maxWidth;\r\n\t\t\t\t\t} else if (image.width < image.height && image.height >= that.maxWidth) {\r\n\t\t\t\t\t\timage.width = that.maxWidth * image.width / image.height;\r\n\t\t\t\t\t\timage.height = that.maxWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscaleWidth = image.width / oW\r\n\t\t\t\t\tscaleHeight = image.height / oH\r\n\t\t\t\t}\r\n\t\t\t\tconst ctx = uni.createCanvasContext('_myCanvas',that);\r\n\t\t\t\tthat.cWidth = image.width;\r\n\t\t\t\tthat.cHeight = image.height;\r\n\t\t\t\t\r\n\t\t\t\t//console.log(that.cWidth);\r\n\t\t\t\t//console.log(that.cHeight);\r\n\t\t\t\tthat._result_wh(that.cWidth,that.cHeight)\r\n\t\t\t\t\r\n\t\t\t\t// 旋转图片\r\n\t\t\t\tswitch (image.orientation) {\r\n\t\t\t\t\tcase 'right': // 旋转90度\r\n\t\t\t\t\t\tthat.cWidth = image.height;\r\n\t\t\t\t\t\tthat.cHeight = image.width;\r\n\t\t\t\t\t\tctx.rotate(Math.PI / 2);\r\n\t\t\t\t\t\tctx.drawImage(imgFile, 0, -image.height, oW * scaleWidth, oH * scaleHeight);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'down': // 旋转180度\r\n\t\t\t\t\t\tctx.rotate(Math.PI);\r\n\t\t\t\t\t\tctx.drawImage(imgFile, -image.width, -image.height, oW * scaleWidth, oH * scaleHeight);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left': // 旋转-90度\r\n\t\t\t\t\t\tthat.cWidth = image.height;\r\n\t\t\t\t\t\tthat.cHeight = image.width;\r\n\t\t\t\t\t\tctx.rotate(3 * Math.PI / 2);\r\n\t\t\t\t\t\tctx.drawImage(imgFile, -image.width, 0, oW * scaleWidth, oH * scaleHeight);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'up':\r\n\t\t\t\t\t\tctx.drawImage(imgFile, 0, 0, oW * scaleWidth, oH * scaleHeight);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tctx.drawImage(imgFile, 0, 0, oW * scaleWidth, oH * scaleHeight);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tctx.draw(false, () => {\r\n\t\t\t\t\tlet time = 0;\r\n\r\n\r\n\r\n\r\n\t\t\t\t\ttime = 500;\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\t\t\twidth: Number(that.cWidth),\r\n\t\t\t\t\t\t\theight: Number(that.cHeight),\r\n\t\t\t\t\t\t\tdestWidth: Number(that.cWidth),\r\n\t\t\t\t\t\t\tdestHeight: Number(that.cHeight),\r\n\t\t\t\t\t\t\tcanvasId: '_myCanvas',\r\n\t\t\t\t\t\t\tfileType: 'jpg',\r\n\t\t\t\t\t\t\tquality: Number(that.ql),\r\n\t\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\t\tconsole.log(\"图片\"+res.tempFilePath);\r\n\t\t\t\t\t\t\t\tthat._result_path(res.tempFilePath)\r\n\t\t\t\t\t\t\t\tif (that.type == 'base64') {\r\n\t\t\t\t\t\t\t\t\tlet img = '';\r\n\t\t\t\t\t\t\t\t\t// let platform = uni.getSystemInfoSync().platform\r\n\t\t\t\t\t\t\t\t\t// if (platform == 'ios') {\r\n\t\t\t\t\t\t\t\t\t// \t// 兼容处理：ios获取的图片上下颠倒\r\n\t\t\t\t\t\t\t\t\t// \timg = that._reverseImgData(res)\r\n\t\t\t\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t\t\t\timg = 'data:image/jpeg;base64,' + wx.getFileSystemManager().readFileSync(res.tempFilePath, \"base64\")\r\n\t\t\t\t\t\t\t\t\tthat._result(img)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthat._result(res.tempFilePath)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: function (e) {\r\n\t\t\t\t\t\t\t\tthat._err(e)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},that)\r\n\t\t\t\t\t}, time);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// ios翻转图片\r\n\t\t_reverseImgData(res) {\r\n\t\t\tvar w = res.width\r\n\t\t\tvar h = res.height\r\n\t\t\tlet con = 0\r\n\t\t\tfor (var i = 0; i < h / 2; i++) {\r\n\t\t\t\tfor (var j = 0; j < w * 4; j++) {\r\n\t\t\t\t\tcon = res.data[i * w * 4 + j]\r\n\t\t\t\t\tres.data[i * w * 4 + j] = res.data[(h - i - 1) * w * 4 + j]\r\n\t\t\t\t\tres.data[(h - i - 1) * w * 4 + j] = con\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn res\r\n\t\t},\r\n\t\t// 返回图片数据\r\n\t\t_result(src) {\r\n\t\t\tuni.hideLoading();\r\n\t\t\tthis.$emit(\"result\", src);\r\n\t\t},\r\n\t\t_result_wh(w,h) {\r\n\t\t\tuni.hideLoading();\r\n\t\t\tthis.$emit(\"result_wh\", w,h);\r\n\t\t},\r\n\t\t_result_path(path) {\r\n\t\t\tuni.hideLoading();\r\n\t\t\tthis.$emit(\"result_path\", path);\r\n\t\t},\r\n\t\t_err(src) {\r\n\t\t\tuni.hideLoading();\r\n\t\t\tthis.$emit(\"err\", src);\r\n\t\t}\r\n\t}\r\n}\r\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./cpimg.vue?vue&type=template&id=476320aa&xlang=wxml&minapp=mpvue&\"\nimport script from \"./cpimg.vue?vue&type=script&lang=js&\"\nexport * from \"./cpimg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cpimg.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('476320aa', component.options)\n    } else {\n      api.reload('476320aa', component.options)\n    }\n    module.hot.accept(\"./cpimg.vue?vue&type=template&id=476320aa&xlang=wxml&minapp=mpvue&\", function () {\n      api.rerender('476320aa', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"E:/Desktop/uni-app/project1/components/cpimg.vue\"\nexport default component.exports","import mod from \"-!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./cpimg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./cpimg.vue?vue&type=script&lang=js&\"","import mod from \"-!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./cpimg.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./cpimg.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\uniapp\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./cpimg.vue?vue&type=template&id=476320aa&xlang=wxml&minapp=mpvue&\""],"sourceRoot":""}